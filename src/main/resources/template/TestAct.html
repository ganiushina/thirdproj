<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.bootstrap5.css"/>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/js/bootstrap.bundle.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.js"></script>
    <script type="text/javascript"
            src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.js"></script>
    <script type="text/javascript"
            src="https://cdn.datatables.net/responsive/2.2.9/js/responsive.bootstrap5.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <style>
        /*table td{*/
        /*    text-align: left;*/
        /*    list-style-type: none;*/
        /*    padding: 0px;*/
        /*}*/

        .headers {
            margin: 10px;
        }
    </style>

</head>
<body>

<div th:replace="~{navigation :: navi(Cart)}"/>

<div class="headers">


    <form th:action="@{/actPut/actAll}" method="get">

        <input required th:value="${date1 != null} ? ${date1}" th:name="date1" type="date"
               placeholder="Дата от ">
        <input required th:value="${date2 != null} ? ${date2}" th:name="date2" type="date"
               placeholder="Дата до">


        <input type="text" id="inputAct" onkeyup="myFunction()" placeholder="Поиск по номеру акта.." title="Type in a act num">
        <input type="text" id="inputCandidate" onkeyup="searchCandidate()" placeholder="Поиск по кандидату.." title="Type in a candidate">
        <input type="text" id="inputProject" onkeyup="searchProject()" placeholder="Поиск по проекту.." title="Type in a project">

        <button type="submit" class="btn btn-primary">Фильтровать</button>

    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


<div style="margin: 20px;">

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
                    role="tab" aria-controls="home" aria-selected="true">Акты за период
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button"
                    role="tab" aria-controls="profile" aria-selected="false">Неоплаченные акты
            </button>
        </li>
    </ul>
<!--    <form action="#" th:action="@{/bonus/add}" method="get">-->
        <div class="tab-content" id="myTabContent">

            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">

                <table id="example1" class="table table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>Номер акта</th>
                        <th>Дата акта</th>
                        <th>Компания</th>
                        <th>Кандидат</th>
                        <th>Проект</th>
                        <th>Сумма</th>
                        <th>Оплата</th>
                        <th>Дата оплаты</th>
                    </tr>
                    </thead>

                    <tbody>


                    <tr th:each="act,iterStat : ${actPutList}">
                        <td style="white-space: nowrap" th:text="${act.num}"/>
                        <td style="white-space: nowrap" th:text="${act.date}"/>

                        <td style="white-space: nowrap" th:text="${act.companies}"/>
                        <td style="white-space: nowrap" th:text="${act.candidate}"/>
                        <td style="white-space: nowrap" th:text="${act.projectName}"/>

                        <td th:text="${act.bonus}"/>
                        <td style="white-space: nowrap" th:text="${act.paid}"/>
                        <td style="white-space: nowrap" th:text="${act.datePayment}"/>
                    </tr>

                    </tbody>


                </table>

            </div>

            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">

                <table id="example2" class="table table-bordered" style="width:100%">
                    <thead>
                    <tr>
                        <th>Номер акта</th>
                        <th>Дата акта</th>
                        <th>Компания</th>
                        <th>Кандидат</th>
                        <th>Проект</th>
                        <th>Сумма</th>
                    </tr>
                    </thead>

                    <tbody>

                    <tr th:each="act,iterStat : ${actNoPayList}">
                        <td th:text="${act.num}"/>
                        <td th:text="${act.date}"/>

                        <td th:text="${act.companies}"/>
                        <td th:text="${act.candidate}"/>
                        <td th:text="${act.projectName}"/>

                        <td th:text="${act.bonus}"/>
                    </tr>
                    </tbody>

                </table>


            </div>
        </div>
        <script>
            $(document).ready(function () {

                var table1 = $('#example1').DataTable({
                    responsive: true,

                });

                var table2 = $('#example2').DataTable({
                    responsive: true,

                });

                $('button[data-bs-toggle="tab"]').on('shown.bs.tab', function (event) {
                    var tabID = $(event.target).attr('data-bs-target');
                    if (tabID === '#profile') {
                        table2.columns.adjust().responsive.recalc();
                    }
                });

            });

            function myFunction() {
                var input, filter, table, table1, tr, tr1, td, td1, i, j;
                input = document.getElementById("inputAct");
                filter = input.value.toUpperCase();
                table = document.getElementById("example1");
                tr = table.getElementsByTagName("tr");

                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[0];
                    if (td) {
                        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }

                table1 = document.getElementById("example2");
                tr1 = table1.getElementsByTagName("tr");

                for (j = 0; j < tr1.length; j++) {
                    td1 = tr1[j].getElementsByTagName("td")[0];
                    if (td1) {
                        if (td1.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr1[j].style.display = "";
                        } else {
                            tr1[j].style.display = "none";
                        }
                    }
                }
            }

            function searchCandidate() {
                var input, filter, table, table1, tr, tr1, td, td1, i, j;
                input = document.getElementById("inputCandidate");
                filter = input.value.toUpperCase();
                table = document.getElementById("example1");
                tr = table.getElementsByTagName("tr");

                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[3];
                    if (td) {
                        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }

                table1 = document.getElementById("example2");
                tr1 = table1.getElementsByTagName("tr");

                for (j = 0; j < tr1.length; j++) {
                    td1 = tr1[j].getElementsByTagName("td")[3];
                    if (td1) {
                        if (td1.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr1[j].style.display = "";
                        } else {
                            tr1[j].style.display = "none";
                        }
                    }
                }
            }



            function searchProject() {
                var input, filter, table, table1, tr, tr1, td, td1, i, j;
                input = document.getElementById("inputProject");
                filter = input.value.toUpperCase();
                table = document.getElementById("example1");
                tr = table.getElementsByTagName("tr");

                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[4];
                    if (td) {
                        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }

                table1 = document.getElementById("example2");
                tr1 = table1.getElementsByTagName("tr");

                for (j = 0; j < tr1.length; j++) {
                    td1 = tr1[j].getElementsByTagName("td")[4];
                    if (td1) {
                        if (td1.innerHTML.toUpperCase().indexOf(filter) > -1) {
                            tr1[j].style.display = "";
                        } else {
                            tr1[j].style.display = "none";
                        }
                    }
                }
            }
        </script>


</body>
</html>